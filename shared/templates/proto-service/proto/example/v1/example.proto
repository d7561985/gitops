// Example proto file demonstrating best practices
//
// This file shows:
// - Proper package declarations
// - Service with CRUD operations
// - Request/Response message patterns
// - Streaming RPC example
// - Enum usage
// - Pagination pattern
//
// Note: go_package, php_namespace, etc. are auto-managed by buf!
// You don't need to specify them manually.
//
// Replace this file with your actual service definition.

syntax = "proto3";

package example.v1;

// ExampleService demonstrates a typical CRUD service with streaming.
service ExampleService {
  // GetExample retrieves a single example by ID.
  rpc GetExample(GetExampleRequest) returns (GetExampleResponse);

  // CreateExample creates a new example resource.
  rpc CreateExample(CreateExampleRequest) returns (CreateExampleResponse);

  // UpdateExample updates an existing example.
  rpc UpdateExample(UpdateExampleRequest) returns (UpdateExampleResponse);

  // DeleteExample removes an example by ID.
  rpc DeleteExample(DeleteExampleRequest) returns (DeleteExampleResponse);

  // ListExamples returns a paginated list of examples.
  rpc ListExamples(ListExamplesRequest) returns (ListExamplesResponse);

  // WatchExamples streams example change events (server streaming).
  rpc WatchExamples(WatchExamplesRequest) returns (stream ExampleEvent);
}

// Example represents an example resource in the system.
message Example {
  string id = 1;
  string name = 2;
  string description = 3;
  ExampleStatus status = 4;
  map<string, string> metadata = 5;
  int64 created_at = 6;  // Unix timestamp
  int64 updated_at = 7;  // Unix timestamp
}

// ExampleStatus represents the lifecycle state of an Example.
enum ExampleStatus {
  EXAMPLE_STATUS_UNSPECIFIED = 0;
  EXAMPLE_STATUS_ACTIVE = 1;
  EXAMPLE_STATUS_INACTIVE = 2;
  EXAMPLE_STATUS_PENDING = 3;
  EXAMPLE_STATUS_ARCHIVED = 4;
}

// GetExample
message GetExampleRequest {
  string id = 1;
}

message GetExampleResponse {
  Example example = 1;
}

// CreateExample
message CreateExampleRequest {
  string name = 1;
  string description = 2;
  map<string, string> metadata = 3;
}

message CreateExampleResponse {
  Example example = 1;
}

// UpdateExample
message UpdateExampleRequest {
  string id = 1;
  optional string name = 2;
  optional string description = 3;
  optional ExampleStatus status = 4;
  map<string, string> metadata = 5;
}

message UpdateExampleResponse {
  Example example = 1;
}

// DeleteExample
message DeleteExampleRequest {
  string id = 1;
}

message DeleteExampleResponse {}

// ListExamples (with pagination)
message ListExamplesRequest {
  int32 page_size = 1;
  string page_token = 2;
  repeated ExampleStatus status_filter = 3;
  string search = 4;
}

message ListExamplesResponse {
  repeated Example examples = 1;
  string next_page_token = 2;
  int32 total_count = 3;
}

// WatchExamples (streaming)
message WatchExamplesRequest {
  repeated string example_ids = 1;
}

message ExampleEvent {
  string event_id = 1;
  ExampleEventType event_type = 2;
  Example example = 3;
  int64 timestamp = 4;
}

enum ExampleEventType {
  EXAMPLE_EVENT_TYPE_UNSPECIFIED = 0;
  EXAMPLE_EVENT_TYPE_CREATED = 1;
  EXAMPLE_EVENT_TYPE_UPDATED = 2;
  EXAMPLE_EVENT_TYPE_DELETED = 3;
}

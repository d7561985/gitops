# GitLab Agent Helm Chart Values
# Source: https://docs.gitlab.com/ee/user/clusters/agent/install/

# Agent configuration
config:
  # Token from GitLab (will be overridden during install)
  token: ""

  # KAS address
  # For GitLab.com:
  kasAddress: "wss://kas.gitlab.com"
  # For self-managed GitLab:
  # kasAddress: "wss://kas.gitlab.example.com"

  # Optional: CA certificate for self-signed certs
  # caCert: |
  #   -----BEGIN CERTIFICATE-----
  #   ...
  #   -----END CERTIFICATE-----

# Image configuration
image:
  repository: registry.gitlab.com/gitlab-org/cluster-integration/gitlab-agent/agentk
  # tag will be set automatically based on chart version

# Resource limits
resources:
  requests:
    cpu: 50m
    memory: 64Mi
  limits:
    cpu: 100m
    memory: 128Mi

# Service account
serviceAccount:
  create: true
  name: gitlab-agent

# RBAC - agent needs cluster-wide access for CI/CD
rbac:
  create: true

# Pod security
podSecurityContext:
  runAsNonRoot: true
  runAsUser: 65534

securityContext:
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: true

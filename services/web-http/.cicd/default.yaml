# Web HTTP Backend - Default Values
# Uses nicholasjackson/fake-service for testing

appName: web-http
version: "v0.19.1"

serviceAccountName: web-http

# For custom image: repository: registry.gitlab.com/${GITLAB_GROUP}/web-http
image:
  repository: nicholasjackson/fake-service
  tag: v0.19.1
  pullPolicy: IfNotPresent

# Enable imagePullSecrets for GitLab Container Registry
# k8app chart uses hardcoded secret name "regsecret"
# Run: ./scripts/setup-registry-secret.sh to create the secret
deploySecretHarbor: false  # Set to true when using private registry

containerPort: 9092

service:
  enabled: true
  type: ClusterIP
  ports:
    - name: http
      port: 9092
      targetPort: 9092

livenessProbe:
  enabled: true
  httpGet:
    path: /health
    port: 9092
  initialDelaySeconds: 5
  periodSeconds: 10

readinessProbe:
  enabled: true
  httpGet:
    path: /ready
    port: 9092
  initialDelaySeconds: 3
  periodSeconds: 5

env:
  - name: LISTEN_ADDR
    value: "0.0.0.0:9092"
  - name: SERVER_TYPE
    value: "http"
  - name: NAME
    value: "web-http"
  - name: MESSAGE
    value: "Hello from HTTP backend"

labels:
  app.kubernetes.io/name: web-http
  app.kubernetes.io/component: backend
  app.kubernetes.io/part-of: gitops-poc-dzha-dzha
  app.kubernetes.io/managed-by: helm

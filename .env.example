# GitOps POC Configuration
# Copy this file to .env and customize for your setup

# GitLab group/namespace for all repositories
GITLAB_GROUP="gitops-poc"

# GitLab host (gitlab.com or self-managed)
GITLAB_HOST="gitlab.com"

# Project prefix (optional, for multiple POCs in same group)
PROJECT_PREFIX=""

# Docker registry (defaults to GitLab Container Registry)
DOCKER_REGISTRY="registry.gitlab.com/${GITLAB_GROUP}"

# Kubernetes cluster context for GitLab Agent
KUBE_CONTEXT="${GITLAB_GROUP}/gitops-config:minikube-agent"

# Vault configuration
VAULT_PATH_PREFIX="gitops-poc"

# Services list (space-separated)
SERVICES="api-gateway auth-adapter web-grpc web-http health-demo"

# Environments list (space-separated)
ENVIRONMENTS="dev staging prod"

# Kubernetes namespace prefix (all services in one namespace per env)
# Example: poc-dev, poc-staging, poc-prod
# Set to empty string for just "dev", "staging", "prod"
NAMESPACE_PREFIX="poc"

# ===========================================
# GitLab Container Registry Authentication
# ===========================================
# Required for Kubernetes to pull images from GitLab Container Registry
# Create a Deploy Token at: https://${GITLAB_HOST}/${GITLAB_GROUP}/-/settings/repository
# Required scopes: read_registry
#
# GITLAB_DEPLOY_TOKEN_USER="gitlab+deploy-token-xxxxx"
# GITLAB_DEPLOY_TOKEN="gldt-xxxxxxxxxxxx"

# ===========================================
# GitLab Agent for Kubernetes (Push-based GitOps)
# ===========================================
# Required for Push-based deployments via GitLab Agent
#
# To get the token:
# 1. Go to: https://${GITLAB_HOST}/${GITLAB_GROUP}/gitops-config
# 2. Operate → Kubernetes clusters → Connect a cluster (agent)
# 3. Enter agent name: minikube-agent
# 4. Click "Create and register"
# 5. Copy the token (shown only once!)
#
# GITLAB_AGENT_TOKEN="glagent-xxxxxx-xxxxxxxxxxxxxxxxx"

# ===========================================
# GitLab Token for ArgoCD (Pull-based GitOps)
# ===========================================
# Required for ArgoCD to access private GitLab repositories
#
# Create a Personal Access Token:
# 1. Go to: https://gitlab.com/-/user_settings/personal_access_tokens
# 2. Token name: argocd-repo-access
# 3. Scopes: read_repository
# 4. Click "Create personal access token"
# 5. Copy the token (shown only once!)
#
# GITLAB_TOKEN="glpat-xxxxxxxxxxxxxxxxxxxx"

# ===========================================
# CloudFlare Configuration
# ===========================================

# --- cert-manager DNS01 (TLS certificates) ---
# Required for automatic TLS certificates via Let's Encrypt DNS01 challenge
#
# Create API Token at: https://dash.cloudflare.com/profile/api-tokens
# Use template "Edit zone DNS" or create custom with:
#   - Zone / DNS / Edit
#   - Zone / Zone / Read
#   - Zone Resources: Include All Zones (or specific zone)
#
# CLOUDFLARE_API_TOKEN="your-api-token"

# Email for Let's Encrypt certificates (required for cert-manager)
# LETSENCRYPT_EMAIL="admin@yourdomain.com"

# --- CloudFlare Tunnel (expose local services) ---
# Optional: Allows exposing minikube services to internet without public IP
#
# Create tunnel at: https://one.dash.cloudflare.com/
#   Networks -> Tunnels -> Create a tunnel -> Cloudflared
#
# CLOUDFLARE_TUNNEL_TOKEN="eyJhIjoiNWFi..."
# CLOUDFLARE_TUNNEL_NAMESPACE="cloudflare"

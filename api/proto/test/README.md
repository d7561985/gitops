# Proto Service Template (Zero-Config)

Create a new proto/gRPC service with just 2 files!

## Quick Start

### 1. Create your service directory

```bash
mkdir -p my-service/proto/myservice/v1
cd my-service
```

### 2. Add CI configuration

Copy from template or create manually:

```yaml
# .gitlab-ci.yml
include:
  - project: 'gitops-poc-dzha/api/ci'
    file: '/templates/proto-gen/template.yml'
```

### 3. Create your proto file

```protobuf
// proto/myservice/v1/service.proto
syntax = "proto3";

package myservice.v1;

service MyService {
  rpc GetItem(GetItemRequest) returns (GetItemResponse);
}

message GetItemRequest {
  string id = 1;
}

message GetItemResponse {
  string id = 1;
  string name = 2;
}
```

### 4. Push to GitLab

```bash
git init
git add .
git commit -m "Initial proto definitions"
git remote add origin https://gitlab.com/gitops-poc-dzha/api/proto/my-service.git
git push -u origin main
```

**That's it!** No `buf.yaml` or `buf.gen.yaml` needed - they are auto-generated by CI.

## What Happens Automatically

1. CI generates `buf.yaml` and `buf.gen.yaml` from `$CI_PROJECT_NAME`
2. Runs lint, breaking check, and code generation
3. Publishes to `api/gen/{service}/{language}/`

## Directory Structure

```
my-service/
├── .gitlab-ci.yml     # CI/CD pipeline (3 lines)
└── proto/
    └── myservice/v1/
        └── service.proto
```

## Documentation

See [Proto/gRPC Infrastructure Guide](../../docs/proto-grpc-infrastructure.md)
